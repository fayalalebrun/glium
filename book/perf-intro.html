<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Performances - Glium Tutorials</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <base href="">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch JQuery from CDN but have a local fallback -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='jquery.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch store.js from local - TODO add CDN when 2.x.x is available on cdnjs -->
        <script src="store.js"></script>

    </head>
    <body class="light">
        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme = store.get('mdbook-theme');
            if (theme === null || theme === undefined) { theme = 'light'; }
            $('body').removeClass().addClass(theme);
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = store.get('mdbook-sidebar');
            if (sidebar === "hidden") { $("html").addClass("sidebar-hidden") }
            else if (sidebar === "visible") { $("html").addClass("sidebar-visible") }
        </script>

        <div id="sidebar" class="sidebar">
            <ul class="chapter"><li class="affix"><a href="README.html">Intro</a></li><li><a href="tuto-01-getting-started.html"><strong>1.</strong> Opening a window</a></li><li><a href="tuto-02-triangle.html"><strong>2.</strong> Drawing a triangle</a></li><li><a href="tuto-03-animated-triangle.html"><strong>3.</strong> Uniforms</a></li><li><a href="tuto-04-matrices.html"><strong>4.</strong> Matrices</a></li><li><a href="tuto-05-colors.html"><strong>5.</strong> Adding colors</a></li><li><a href="tuto-06-texture.html"><strong>6.</strong> Adding a texture</a></li><li><a href="tuto-07-shape.html"><strong>7.</strong> A more complex shape</a></li><li><a href="tuto-08-gouraud.html"><strong>8.</strong> Gouraud shading</a></li><li><a href="tuto-09-depth.html"><strong>9.</strong> Depth testing</a></li><li><a href="tuto-10-perspective.html"><strong>10.</strong> Adjusting the perspective</a></li><li><a href="tuto-11-backface-culling.html"><strong>11.</strong> Backface culling</a></li><li><a href="tuto-12-camera.html"><strong>12.</strong> The camera and summary of the vertex processing stages</a></li><li><a href="tuto-13-phong.html"><strong>13.</strong> Blinn-phong shading</a></li><li><a href="tuto-14-wall.html"><strong>14.</strong> Normal mapping</a></li><li><strong>15.</strong> Parallax mapping</li><li><strong>16.</strong> Deferred shading</li><li><strong>17.</strong> Shadow mapping</li><li><strong>18.</strong> Antialiasing</li><li><strong>19.</strong> Drawing lots of objects with instancing</li><li><a href="perf-intro.html" class="active"><strong>20.</strong> Performances</a></li><li><a href="perf-sync.html"><strong>21.</strong> Synchronization</a></li></ul>
        </div>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page" tabindex="-1">
                
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <i id="sidebar-toggle" class="fa fa-bars" title="Toggle sidebar"></i>
                        <i id="theme-toggle" class="fa fa-paint-brush" title="Change theme"></i>
                    </div>

                    <h1 class="menu-title">Glium Tutorials</h1>

                    <div class="right-buttons">
                        <a href="print.html">
                            <i id="print-button" class="fa fa-print" title="Print this book"></i>
                        </a>
                    </div>
                </div>

                <div id="content" class="content">
                    <a class="header" href="perf-intro.html#performances" id="performances"><h1>Performances</h1></a>
<p>Here is the estimated cost of various operations:</p>
<ul>
<li>
<p><strong>Creating a <code>Program</code></strong>: very high, as the driver has to compile the source code of the program.
Do this only at initialization.</p>
</li>
<li>
<p><strong>Creating an empty buffer</strong>: medium for vertex and index buffers, low for other buffers.</p>
</li>
<li>
<p><strong>Uploading data to a buffer</strong>: low to medium. The transfer rate between RAM and video memory is
around 15 GB per second today. This means that uploading 1 MB of data takes around 65Âµs. The
OpenGL implementation can also sometimes give you a buffer whose data is located in RAM, in
which case you pay the price when drawing rather than uploading.</p>
</li>
<li>
<p><strong>Copying between two buffers</strong>: very low (similar to a memcpy on the CPU). This operation is done
asynchronously by the GPU or the DMA. The transfer rate is around 50 GB per second.</p>
</li>
<li>
<p><strong>Creating a texture</strong>: low. Reusing an existing texture is faster than creating a new one, but not
by much.</p>
</li>
<li>
<p><strong>Uploading data to a texture</strong>: low to high. If the data you give to OpenGL matches the texture's
internal format then the cost is the same as uploading data to a buffer. However if the data
has the wrong format then the GPU must perform conversions.</p>
</li>
<li>
<p><strong>Transferring between a pixel buffer and a texture</strong>: very low to very high. This is similar to
&quot;Uploading data to a texture&quot;. If the data matches the texture's internal format, then it is
simply a transfer between video memory. If the data doesn't match the format, then the OpenGL
implementation will read from the texture/buffer to RAM, perform conversions, then upload the data to
the texture/buffer.</p>
</li>
<li>
<p><strong>A draw call</strong>: medium. A draw call has a fixed cost on the CPU, and both a fixed cost and a
variable cost on the GPU. In order to reduce that fixed cost, you should group draw calls
together if you can. For example drawing ten sprites is better done by writing twenty
triangles in the same vertex buffer and submitting only one command, instead of submitting
ten commands.</p>
</li>
<li>
<p><strong>Swapping buffers</strong>: very low/variable. The process of swapping buffers at the end of a frame
is very fast. However if you benchmark this function call you can probably see that it takes a
a lot of time. The reason is that the OpenGL implementation usually doesn't send commands
to the GPU immediately. Instead it adds commands to a local queue, then sends chunks of commands
at once. When you swap buffers, the implementation flushes its local queue and sends all its
commands to the GPU. In addition to this, also note that vsync can make swapping buffers block
until the screen refreshes.</p>
</li>
</ul>
<a class="header" href="perf-intro.html#avoiding-state-changes" id="avoiding-state-changes"><h2>Avoiding state changes</h2></a>
<p>Doing multiple draw calls in a row with the same parameters (same vertices source, same program,
same draw parameters, same uniforms) is faster than switching parameters.</p>
<p>More precisely:</p>
<ul>
<li>
<p>Changing uniforms of basic types (floats, integers, etc.) between two draw calls: low.</p>
</li>
<li>
<p>Changing texture uniforms between two draw calls: medium.</p>
</li>
<li>
<p>Changing the draw parameters between two draw calls: medium.</p>
</li>
<li>
<p>Changing the source of vertices between two draw calls: medium.</p>
</li>
<li>
<p>Changing the program between two draw calls: high.</p>
</li>
<li>
<p>Changing the render target between two draw calls: high.</p>
</li>
</ul>
<p>Therefore if you have a lot of things to draw, you should group objects by program, draw parameters,
and source of vertices.</p>

                </div>

                <!-- Mobile navigation buttons -->
                
                    <a rel="prev" href="tuto-14-wall.html" class="mobile-nav-chapters previous" title="Previous chapter">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="perf-sync.html" class="mobile-nav-chapters next" title="Next chapter">
                        <i class="fa fa-angle-right"></i>
                    </a>
                

            </div>

            
                <a href="tuto-14-wall.html" class="nav-chapters previous" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-left"></i>
                </a>
            

            
                <a href="perf-sync.html" class="nav-chapters next" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-right"></i>
                </a>
            

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if ($(".fa").css("font-family") !== "FontAwesome") {
                $('<link rel="stylesheet" type="text/css" href="_FontAwesome/css/font-awesome.css">').prependTo('head');
            }
        </script>

        <!-- Livereload script (if served using the cli tool) -->
        

        

        

        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        

    </body>
</html>
